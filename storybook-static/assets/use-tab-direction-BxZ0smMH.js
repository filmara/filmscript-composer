import{r as i,R as c}from"./index-BX3iQpgp.js";import{b as p,a as f}from"./use-sync-refs-Bp_oN-Mm.js";import{f as h,s as E}from"./hidden-DCWq1eXD.js";import{u as v}from"./keyboard-Dv8ekvWT.js";import{n as y,s as b}from"./portal-CtDEOrxV.js";function C(n,t,o,a){let s=p(o);i.useEffect(()=>{n=n??window;function r(u){s.current(u)}return n.addEventListener(t,r,a),()=>n.removeEventListener(t,r,a)},[n,t,a])}function M({defaultContainers:n=[],portals:t,mainTreeNode:o}={}){let a=y(o),s=f(()=>{var r,u;let l=[];for(let e of n)e!==null&&(e instanceof HTMLElement?l.push(e):"current"in e&&e.current instanceof HTMLElement&&l.push(e.current));if(t!=null&&t.current)for(let e of t.current)l.push(e);for(let e of(r=a==null?void 0:a.querySelectorAll("html > *, body > *"))!=null?r:[])e!==document.body&&e!==document.head&&e instanceof HTMLElement&&e.id!=="headlessui-portal-root"&&(o&&(e.contains(o)||e.contains((u=o==null?void 0:o.getRootNode())==null?void 0:u.host))||l.some(m=>e.contains(m))||l.push(e));return l});return{resolveContainers:s,contains:f(r=>s().some(u=>u.contains(r)))}}let d=i.createContext(null);function S({children:n,node:t}){let[o,a]=i.useState(null),s=w(t??o);return c.createElement(d.Provider,{value:s},n,s===null&&c.createElement(h,{features:E.Hidden,ref:r=>{var u,l;if(r){for(let e of(l=(u=v(r))==null?void 0:u.querySelectorAll("html > *, body > *"))!=null?l:[])if(e!==document.body&&e!==document.head&&e instanceof HTMLElement&&e!=null&&e.contains(r)){a(e);break}}}}))}function w(n=null){var t;return(t=i.useContext(d))!=null?t:n}var L=(n=>(n[n.Forwards=0]="Forwards",n[n.Backwards=1]="Backwards",n))(L||{});function q(){let n=i.useRef(0);return b(!0,"keydown",t=>{t.key==="Tab"&&(n.current=t.shiftKey?1:0)},!0),n}export{C as E,S as O,M as R,L as a,w as b,q as u};
