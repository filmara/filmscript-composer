import{j as e}from"./jsx-runtime-DwRxq3ZX.js";import{u as _,I,F as J}from"./TimePicker-EiDT2vLZ.js";import{B as b}from"./Button-CRpRb3oO.js";import{R as C}from"./index-BX3iQpgp.js";import{c as K}from"./clsx-B-dksMZM.js";const w=({debug:j=!1,button:n})=>{const{fieldsState:x}=_();return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"space-y-4",children:x.map((l,s)=>e.jsx("div",{children:l.map(({type:d,id:i,label:F,placeholder:c,autoComplete:S,required:N,uploadFile:v,icon:f,options:h,variant:u,hidden:m=!1,afterChange:r,populateOptions:t,belongs_to:a,disabled:g=!1,defaultValue:o},p)=>e.jsx(I,{type:d,id:i,disabled:g,options:h,label:F,uploadFile:v,hidden:m,icon:f,variant:u,belongs_to:a,populateOptions:t,debug:j,defaultValue:o||"",autoComplete:S,placeholder:c,required:N},p))},s))}),e.jsx("div",{className:"pt-6",children:e.jsx(b,{text:n.text,type:"submit",rounded:"medium",size:n.size,icon:n.icon,loading:n.loading,variant:n.variant,customCss:n.customCss})})]})};w.__docgenInfo={description:"",methods:[],displayName:"DynamicForm",props:{debug:{defaultValue:{value:"false",computed:!1},required:!1}}};const R=({fields:j,debug:n=!1,button:x})=>{const l=j.length-1,[s,d]=C.useState(0),{fieldsState:i,updateForm:F,formState:c}=_(),[S,N]=C.useState(null),[v,f]=C.useState(!1),h=({key:r})=>{s<=l&&(d(s+1),f(!1))};C.useEffect(()=>{i.length>0&&s!==i.length&&(async()=>{const r=i[s].map(async(a,g)=>{var p;if(((p=a.validation)==null?void 0:p.fn)===void 0)return!0;if(c===null)return!1;const{value:o}=c.find(({id:y})=>y===a.id);return console.log("value",o),await a.validation.fn(o)}),t=await Promise.all(r);console.log("RESULT",t),f(t.every(a=>a===!0||a.valid===!0))})()},[c,v]);const u=()=>{s>=1&&(d(s+-1),f(!0))},m=K(`grid gap-[4px] grid-cols-${l+2}`);return e.jsx(e.Fragment,{children:s===i.length?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-subheading-bold text-neutral-800 mb-[20px]",children:"Review details"}),e.jsxs("div",{className:"space-y-[8px]",children:[i.map((r,t)=>e.jsx("div",{children:r.map(({id:a,label:g},o)=>{const{value:p}=c.find(({id:y})=>y===a);return e.jsx("div",{children:e.jsxs("div",{className:"text-neutral-800",children:[g,": ",p]})},o)})},t)),c.map(({id:r,value:t},a)=>e.jsx("input",{hidden:!0,id:r,name:r,defaultValue:t},a))]}),e.jsxs("div",{className:"pt-6 flex flex-col space-y-[20px]",children:[e.jsxs("div",{className:"flex flex-row justify-start space-x-[8px]",children:[e.jsx(b,{text:x.text,type:"submit",rounded:"medium",variant:x.variant,customCss:x.customCss}),e.jsx(b,{onClick:()=>u(),text:"back",variant:"basic"})]}),e.jsxs("div",{className:"flex flex-col space-y-[8px]",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-green-400 text-p2-bold",children:s}),e.jsxs("span",{className:"text-green-200 text-p2-medium pl-[2px]",children:["/",l+1]})]}),e.jsx("div",{className:m,children:e.jsx("div",{className:`bg-green-400 rounded-[2px] h-[4px] col-span-${s+1}`})})]})]})]}):e.jsxs("div",{className:"flex flex-col justify-between h-[420px]",children:[i.map((r,t)=>e.jsx(e.Fragment,{children:e.jsx("div",{className:s!==t?"hidden":"flex flex-col space-y-[12px]",children:r.map(({type:a,id:g,label:o,placeholder:p,autoComplete:y,required:B,icon:$,uploadFile:D,options:E,hidden:z=!1,afterChange:A,validation:P,maxLength:L,variant:O,populateOptions:T,belongs_to:U,disabled:G=!1,defaultValue:V,title:k,description:q,multiple:H})=>e.jsxs(e.Fragment,{children:[k&&e.jsx("div",{className:"text-subheading-bold text-neutral-800",children:k}),q&&e.jsx("div",{className:"text-p3-medium text-neutral-400",children:q}),e.jsx(I,{type:a,id:g,disabled:G,label:o,options:E,afterChange:a==="select"||a==="radiobox"?A:N,maxLength:L,variant:O,uploadFile:D,icon:$,validation:P,belongs_to:U,populateOptions:T,hidden:s!==t?!0:z,debug:n,defaultValue:V||"",autoComplete:y,placeholder:p,required:B,multiple:H},t)]}))})})),e.jsxs("div",{className:"pt-6 flex flex-col space-y-[20px]",children:[e.jsxs("div",{className:"flex flex-row justify-start space-x-[8px]",children:[e.jsx(b,{onClick:()=>h({data:j}),text:"next",variant:"primary",disabled:!v}),s>=1&&e.jsx(b,{onClick:()=>u(),text:"back",variant:"basic"})]}),e.jsxs("div",{className:"flex flex-col space-y-[8px]",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-neutral-800 text-p2-bold",children:s+1}),e.jsxs("span",{className:"text-neutral-400 text-p2-medium pl-[2px]",children:["/",l+1]})]}),e.jsxs("div",{className:m,children:[e.jsx("div",{className:`bg-primary-400 rounded-[2px] h-[4px] col-span-${s+1}`}),e.jsx("div",{className:`bg-neutral-400 rounded-[2px] h-[4px] col-span-${l-s+1}`})]})]})]})]})})};R.__docgenInfo={description:"",methods:[],displayName:"StepperForm",props:{debug:{defaultValue:{value:"false",computed:!1},required:!1}}};const M=({type:j="default",id:n,fields:x,action:l,mode:s="action",debug:d=!1,button:i,preventDefault:F=!1,component:c,afterSubmit:S})=>{const N=(v,f)=>{const{fields:h,button:u,action:m}=f;switch(v){case"stepper":return e.jsx(R,{fields:h,button:u,action:m,debug:d});case"dynamic":return e.jsx(w,{fields:h,button:u,action:m,debug:d});default:return e.jsx(w,{fields:h,button:u,action:m,debug:d})}};return e.jsx(e.Fragment,{children:e.jsxs(J,{mode:s,fields:x,action:l||"",component:c,preventDefault:F,afterSubmit:S,debug:d,children:[e.jsx("input",{type:"text",hidden:!0,name:"id",id:"id",readOnly:!0,defaultValue:n}),N(j,{fields:x,action:l,button:i})]})})};M.__docgenInfo={description:"",methods:[],displayName:"Form",props:{type:{defaultValue:{value:"'default'",computed:!1},required:!1},mode:{defaultValue:{value:"'action'",computed:!1},required:!1},debug:{defaultValue:{value:"false",computed:!1},required:!1},preventDefault:{defaultValue:{value:"false",computed:!1},required:!1}}};export{M as F};
