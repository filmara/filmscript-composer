import{R as O,r as a}from"./index-BX3iQpgp.js";const S=typeof document<"u"?O.useLayoutEffect:()=>{};function R(t){const n=a.useRef(null);return S(()=>{n.current=t},[t]),a.useCallback((...e)=>{const r=n.current;return r==null?void 0:r(...e)},[])}const m=t=>{var n;return(n=t==null?void 0:t.ownerDocument)!==null&&n!==void 0?n:document},b=t=>t&&"window"in t&&t.window===t?t:m(t).defaultView||window;function _(t){var n;return typeof window>"u"||window.navigator==null?!1:((n=window.navigator.userAgentData)===null||n===void 0?void 0:n.brands.some(e=>t.test(e.brand)))||t.test(window.navigator.userAgent)}function j(t){var n;return typeof window<"u"&&window.navigator!=null?t.test(((n=window.navigator.userAgentData)===null||n===void 0?void 0:n.platform)||window.navigator.platform):!1}function D(t){let n=null;return()=>(n==null&&(n=t()),n)}const G=D(function(){return j(/^Mac/i)}),U=D(function(){return _(/Android/i)});function z(t){return t.mozInputSource===0&&t.isTrusted?!0:U()&&t.pointerType?t.type==="click"&&t.buttons===1:t.detail===0&&!t.pointerType}class N{isDefaultPrevented(){return this.nativeEvent.defaultPrevented}preventDefault(){this.defaultPrevented=!0,this.nativeEvent.preventDefault()}stopPropagation(){this.nativeEvent.stopPropagation(),this.isPropagationStopped=()=>!0}isPropagationStopped(){return!1}persist(){}constructor(n,e){this.nativeEvent=e,this.target=e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget,this.bubbles=e.bubbles,this.cancelable=e.cancelable,this.defaultPrevented=e.defaultPrevented,this.eventPhase=e.eventPhase,this.isTrusted=e.isTrusted,this.timeStamp=e.timeStamp,this.type=n}}function W(t){let n=a.useRef({isFocused:!1,observer:null});S(()=>{const r=n.current;return()=>{r.observer&&(r.observer.disconnect(),r.observer=null)}},[]);let e=R(r=>{t==null||t(r)});return a.useCallback(r=>{if(r.target instanceof HTMLButtonElement||r.target instanceof HTMLInputElement||r.target instanceof HTMLTextAreaElement||r.target instanceof HTMLSelectElement){n.current.isFocused=!0;let o=r.target,s=d=>{n.current.isFocused=!1,o.disabled&&e(new N("blur",d)),n.current.observer&&(n.current.observer.disconnect(),n.current.observer=null)};o.addEventListener("focusout",s,{once:!0}),n.current.observer=new MutationObserver(()=>{if(n.current.isFocused&&o.disabled){var d;(d=n.current.observer)===null||d===void 0||d.disconnect();let u=o===document.activeElement?null:document.activeElement;o.dispatchEvent(new FocusEvent("blur",{relatedTarget:u})),o.dispatchEvent(new FocusEvent("focusout",{bubbles:!0,relatedTarget:u}))}}),n.current.observer.observe(o,{attributes:!0,attributeFilter:["disabled"]})}},[e])}function Y(t){let{isDisabled:n,onFocus:e,onBlur:r,onFocusChange:o}=t;const s=a.useCallback(c=>{if(c.target===c.currentTarget)return r&&r(c),o&&o(!1),!0},[r,o]),d=W(s),u=a.useCallback(c=>{const f=m(c.target);c.target===c.currentTarget&&f.activeElement===c.target&&(e&&e(c),o&&o(!0),d(c))},[o,e,d]);return{focusProps:{onFocus:!n&&(e||o||r)?u:void 0,onBlur:!n&&(r||o)?s:void 0}}}let w=null,H=new Set,h=new Map,p=!1,P=!1;const q={Tab:!0,Escape:!0};function k(t,n){for(let e of H)e(t,n)}function J(t){return!(t.metaKey||!G()&&t.altKey||t.ctrlKey||t.key==="Control"||t.key==="Shift"||t.key==="Meta")}function T(t){p=!0,J(t)&&(w="keyboard",k("keyboard",t))}function l(t){w="pointer",(t.type==="mousedown"||t.type==="pointerdown")&&(p=!0,k("pointer",t))}function I(t){z(t)&&(p=!0,w="virtual")}function B(t){t.target===window||t.target===document||(!p&&!P&&(w="virtual",k("virtual",t)),p=!1,P=!1)}function A(){p=!1,P=!0}function M(t){if(typeof window>"u"||h.get(b(t)))return;const n=b(t),e=m(t);let r=n.HTMLElement.prototype.focus;n.HTMLElement.prototype.focus=function(){p=!0,r.apply(this,arguments)},e.addEventListener("keydown",T,!0),e.addEventListener("keyup",T,!0),e.addEventListener("click",I,!0),n.addEventListener("focus",B,!0),n.addEventListener("blur",A,!1),typeof PointerEvent<"u"?(e.addEventListener("pointerdown",l,!0),e.addEventListener("pointermove",l,!0),e.addEventListener("pointerup",l,!0)):(e.addEventListener("mousedown",l,!0),e.addEventListener("mousemove",l,!0),e.addEventListener("mouseup",l,!0)),n.addEventListener("beforeunload",()=>{K(t)},{once:!0}),h.set(n,{focus:r})}const K=(t,n)=>{const e=b(t),r=m(t);n&&r.removeEventListener("DOMContentLoaded",n),h.has(e)&&(e.HTMLElement.prototype.focus=h.get(e).focus,r.removeEventListener("keydown",T,!0),r.removeEventListener("keyup",T,!0),r.removeEventListener("click",I,!0),e.removeEventListener("focus",B,!0),e.removeEventListener("blur",A,!1),typeof PointerEvent<"u"?(r.removeEventListener("pointerdown",l,!0),r.removeEventListener("pointermove",l,!0),r.removeEventListener("pointerup",l,!0)):(r.removeEventListener("mousedown",l,!0),r.removeEventListener("mousemove",l,!0),r.removeEventListener("mouseup",l,!0)),h.delete(e))};function Q(t){const n=m(t);let e;return n.readyState!=="loading"?M(t):(e=()=>{M(t)},n.addEventListener("DOMContentLoaded",e)),()=>K(t,e)}typeof document<"u"&&Q();function V(){return w!=="pointer"}const X=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);function Z(t,n,e){var r;const o=typeof window<"u"?b(e==null?void 0:e.target).HTMLInputElement:HTMLInputElement,s=typeof window<"u"?b(e==null?void 0:e.target).HTMLTextAreaElement:HTMLTextAreaElement,d=typeof window<"u"?b(e==null?void 0:e.target).HTMLElement:HTMLElement,u=typeof window<"u"?b(e==null?void 0:e.target).KeyboardEvent:KeyboardEvent;return t=t||(e==null?void 0:e.target)instanceof o&&!X.has(e==null||(r=e.target)===null||r===void 0?void 0:r.type)||(e==null?void 0:e.target)instanceof s||(e==null?void 0:e.target)instanceof d&&(e==null?void 0:e.target.isContentEditable),!(t&&n==="keyboard"&&e instanceof u&&!q[e.key])}function ee(t,n,e){M(),a.useEffect(()=>{let r=(o,s)=>{Z(!!(e!=null&&e.isTextInput),o,s)&&t(V())};return H.add(r),()=>{H.delete(r)}},n)}function te(t){let{isDisabled:n,onBlurWithin:e,onFocusWithin:r,onFocusWithinChange:o}=t,s=a.useRef({isFocusWithin:!1}),d=a.useCallback(f=>{s.current.isFocusWithin&&!f.currentTarget.contains(f.relatedTarget)&&(s.current.isFocusWithin=!1,e&&e(f),o&&o(!1))},[e,o,s]),u=W(d),c=a.useCallback(f=>{!s.current.isFocusWithin&&document.activeElement===f.target&&(r&&r(f),o&&o(!0),s.current.isFocusWithin=!0,u(f))},[r,o,u]);return n?{focusWithinProps:{onFocus:void 0,onBlur:void 0}}:{focusWithinProps:{onFocus:c,onBlur:d}}}let L=!1,F=0;function x(){L=!0,setTimeout(()=>{L=!1},50)}function C(t){t.pointerType==="touch"&&x()}function ne(){if(!(typeof document>"u"))return typeof PointerEvent<"u"?document.addEventListener("pointerup",C):document.addEventListener("touchend",x),F++,()=>{F--,!(F>0)&&(typeof PointerEvent<"u"?document.removeEventListener("pointerup",C):document.removeEventListener("touchend",x))}}function oe(t){let{onHoverStart:n,onHoverChange:e,onHoverEnd:r,isDisabled:o}=t,[s,d]=a.useState(!1),u=a.useRef({isHovered:!1,ignoreEmulatedMouseEvents:!1,pointerType:"",target:null}).current;a.useEffect(ne,[]);let{hoverProps:c,triggerHoverEnd:f}=a.useMemo(()=>{let g=(i,$)=>{if(u.pointerType=$,o||$==="touch"||u.isHovered||!i.currentTarget.contains(i.target))return;u.isHovered=!0;let y=i.currentTarget;u.target=y,n&&n({type:"hoverstart",target:y,pointerType:$}),e&&e(!0),d(!0)},E=(i,$)=>{if(u.pointerType="",u.target=null,$==="touch"||!u.isHovered)return;u.isHovered=!1;let y=i.currentTarget;r&&r({type:"hoverend",target:y,pointerType:$}),e&&e(!1),d(!1)},v={};return typeof PointerEvent<"u"?(v.onPointerEnter=i=>{L&&i.pointerType==="mouse"||g(i,i.pointerType)},v.onPointerLeave=i=>{!o&&i.currentTarget.contains(i.target)&&E(i,i.pointerType)}):(v.onTouchStart=()=>{u.ignoreEmulatedMouseEvents=!0},v.onMouseEnter=i=>{!u.ignoreEmulatedMouseEvents&&!L&&g(i,"mouse"),u.ignoreEmulatedMouseEvents=!1},v.onMouseLeave=i=>{!o&&i.currentTarget.contains(i.target)&&E(i,"mouse")}),{hoverProps:v,triggerHoverEnd:E}},[n,e,r,o,u]);return a.useEffect(()=>{o&&f({currentTarget:u.target},u.pointerType)},[o]),{hoverProps:c,isHovered:s}}function ue(t={}){let{autoFocus:n=!1,isTextInput:e,within:r}=t,o=a.useRef({isFocused:!1,isFocusVisible:n||V()}),[s,d]=a.useState(!1),[u,c]=a.useState(()=>o.current.isFocused&&o.current.isFocusVisible),f=a.useCallback(()=>c(o.current.isFocused&&o.current.isFocusVisible),[]),g=a.useCallback(i=>{o.current.isFocused=i,d(i),f()},[f]);ee(i=>{o.current.isFocusVisible=i,f()},[],{isTextInput:e});let{focusProps:E}=Y({isDisabled:r,onFocusChange:g}),{focusWithinProps:v}=te({isDisabled:!r,onFocusWithinChange:g});return{isFocused:s,isFocusVisible:u,focusProps:r?v:E}}export{ue as $,oe as a};
